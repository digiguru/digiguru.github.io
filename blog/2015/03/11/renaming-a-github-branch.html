<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Rename a git branch</title>
        <meta name="viewport" content="width=device-width">

        <link href='http://fonts.googleapis.com/css?family=Audiowide' rel='stylesheet' type='text/css'>
        
        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="container">
          <div class="site">
            <div class="header">
              <h1 class="title"><a href="/">Digiguru.co.uk</a></h1>
              <a class="extra" href="/">home</a>
            </div>

                <h2>Rename a git branch</h2>
<p class="meta">11 Mar 2015</p>

<div class="post">
<p>After moving our repos from svn to git, we’ve need to rename some of the branches - a simple way of grouping up logical branches.</p>

<p>We have the following naming conventions for our branches.</p>

<ul>
  <li><em>master</em> - default branch. This will always have the last released working codebase.</li>
  <li><em>develop</em> - this is the current QA version after any feature has been merged in. Anything in here is developer tested, and can be released to beta testers.</li>
  <li><em>feature/{ticketName}</em> - holds all the changes associated to an individual ticket. If anything gets pushed back from beta testing, it should be fixed inside the feature branch before merging back into the develop branch.</li>
  <li><em>protoype/{prototypeName}</em> - holds any prototypes being worked on that are to be shared in the team. Useful way to try things that are just proof of concept (and often will grow into a feature).</li>
</ul>

<p>Effectively we use the <a href="https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow">gitflow worklow</a>, but with rigid naming conventions.</p>

<p>Sadly we are part way through the project and it comes with alot of history, so we really should go back and fix all the branch names. To do this I am using the following process.</p>

<h1 id="synchronize-the-solution">Synchronize the solution</h1>

<p>If I havn’t already done so I need to synchronize the solution. In Github it’s a simple case of hitting the “Clone on Desktop” button and letting the GUI do the hard work.</p>

<p>In command line I believe it’s the following…</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">$ git clone git@github.com:path/repo.git
$ git pull origin master</code></pre></div>

<p>Now we need to swap to the branch we want to rename.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">$ git checkout MyBadlyNamedBranch</code></pre></div>

<p>Now to rename the branch - firstly we (SHOCK!) delete the branch of the remote server. WHY? I hear you say - there is no concept of a rename, but git is a distrubted system - and you have a copy on your local computer. You are just about to push it up again, but under the new name.</p>

<p>Straight afterwards we will push the local branch up again, but this time with the new name</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">$ git push origin :MyBadlyNamedBranch
$ git push origin MyBadlyNamedBranch:MyBetterNamedBranch</code></pre></div>

<p>The ouptut for these commands will be as follows - firstly…</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">To http://www.github.com/path/repo.git
 - [deleted]         MyBadlyNamedBranch</code></pre></div>

<p>Eeek-  quickly run the second line…</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">Counting objects: 101, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (15/15), done.
Writing objects: 100% (33/33), 4.72 KiB | 0 bytes/s, done.
Total 33 (delta 25), reused 24 (delta 16)
To http://www.github.com/path/repo.git
 * [new branch]      MyBadlyNamedBranch -&gt; MyBetterNamedBranch</code></pre></div>

<p>Not quite out of the woods yet - technically everyone who consumes the repo needs to delete the old branch from their local repos. Quite frankly - it’s up to them what they do. I do it becasue I just want to see branches that are current, but it’s up to the individual.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">$ git checkout Master
$ git branch -D MyBadlyNamedBranch</code></pre></div>

<p>If you don’t run the checkout command it will tell you…</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">error: Cannot delete the branch &#39;MyBadlyNamedBranch&#39; which you are currently on.</code></pre></div>

<p>There we go. Branches - renamed.</p>

</div>


              
              
              <div id="disqus_thread"></div>
              
            <div class="footer">
              <div class="contact">
                <p>
                  Name<br />
                  What You Are<br />
                  digiguru@gmail.com
                </p>
              </div>
              <div class="contact">
                <p>
                  <a href="http://github.com/digiguru/">github.com/digiguru</a><br />
                  <a href="http://twitter.com/thedigiguru/">twitter.com/thedigiguru</a><br />
                </p>
              </div>
            </div>
          </div>
        </div> <!-- /container -->

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-123008-9', 'digiguru.co.uk');
ga('require', 'linkid', 'linkid.js');
ga('send', 'pageview');

</script>
        
<script type="text/javascript">
    var disqus_shortname = 'digigurucouk';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
        
  
    </body>
</html>
