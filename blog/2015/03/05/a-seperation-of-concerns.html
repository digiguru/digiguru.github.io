<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>A seperation of concerns</title>
        <meta name="viewport" content="width=device-width">

        <link href='http://fonts.googleapis.com/css?family=Audiowide' rel='stylesheet' type='text/css'>
        
        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="container">
          <div class="site">
            <div class="header">
              <h1 class="title"><a href="/">Digiguru.co.uk</a></h1>
              <a class="extra" href="/">home</a>
            </div>

                <h2>A seperation of concerns</h2>
<p class="meta">05 Mar 2015</p>

<div class="post">
<p>Another antipattern I come across in legacy codebases is  a lack of a separation of concern.</p>

<div class="highlight"><pre><code class="language-html" data-lang="html">&lt;div id=&quot;main&quot; style=&quot;width: 330px; border: 1px #ccc solid&quot;&gt;
    &lt;h1 onclick=&quot;loadList()&quot;&gt;Top 5 girls name&lt;/h1&gt;
    &lt;ul style=&quot;display: none;&quot;&gt;
        &lt;li onclick=&quot;clickName(&#39;Sophia&#39;);&quot; 
        style=&quot;border-top: 1px #ccc solid; border-left: 1px #ccc solid; border-right: 1px #ccc solid;&quot;&gt;Sophia&lt;/li&gt;
        &lt;li onclick=&quot;clickName(&#39;Emma&#39;);&quot; 
        style=&quot;background-color: #eee; border-left: 1px #ccc solid; border-right: 1px #ccc solid;&quot;&gt;Emma&lt;/li&gt;
        &lt;li onclick=&quot;clickName(&#39;Olivia&#39;);&quot; 
        style=&quot;border-left: 1px #ccc solid; border-right: 1px #ccc solid;&quot;&gt;Olivia&lt;/li&gt;
        &lt;li onclick=&quot;clickName(&#39;Ava&#39;);&quot; 
        style=&quot;background-color: #eee; border-left: 1px #ccc solid; border-right: 1px #ccc solid;&quot;&gt;Ava&lt;/li&gt;
        &lt;li onclick=&quot;clickName(&#39;Isabella&#39;);&quot; 
        style=&quot;border-left: 1px #ccc solid; border-right: 1px #ccc solid; border-bottom: 1px #ccc solid;&quot;&gt;Isabella&lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;</code></pre></div>

<p>Here we have a few issues, but lets sweep through them one by one. Firstly CSS. Sadly the developer that did this sweep didn’t really understand what you can do with CSS so offered this solution.</p>

<div class="highlight"><pre><code class="language-css" data-lang="css">#main { width: 330px; border: 1px #ccc solid; }
ul { display: none }
.firstListItem { border-top: 1px #ccc solid; border-left: 1px #ccc solid; border-right: 1px #ccc solid; }
.evenListItem { background-color: #eee; border-left: 1px #ccc solid; border-right: 1px #ccc solid; }
.oddListItem { border-left: 1px #ccc solid; border-right: 1px #ccc solid; }
.lastListItem { border-left: 1px #ccc solid; border-right: 1px #ccc solid; border-bottom: 1px #ccc solid; }</code></pre></div>

<p>And the HTML</p>

<div class="highlight"><pre><code class="language-html" data-lang="html">&lt;div id=&quot;main&quot;&gt;
    &lt;h1 onclick=&quot;loadList()&quot;&gt;Top 5 girls name&lt;/h1&gt;
    &lt;ul&gt;
        &lt;li class=&quot;firstListItem&quot; onclick=&quot;clickName(&#39;Sophia&#39;);&quot;&gt;Sophia&lt;/li&gt;
        &lt;li class=&quot;evenListItem&quot; onclick=&quot;clickName(&#39;Emma&#39;);&quot;&gt;Emma&lt;/li&gt;
        &lt;li class=&quot;oddListItem&quot; onclick=&quot;clickName(&#39;Olivia&#39;);&quot;&gt;Olivia&lt;/li&gt;
        &lt;li class=&quot;evenListItem&quot; onclick=&quot;clickName(&#39;Ava&#39;);&quot;&gt;Ava&lt;/li&gt;
        &lt;li class=&quot;lastListItem&quot; onclick=&quot;clickName(&#39;Isabella&#39;);&quot;&gt;Isabella&lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;</code></pre></div>

<p>The developer is asked what happens if we decide to have another name added - it dawns on them they need to create a new rule…</p>

<div class="highlight"><pre><code class="language-css" data-lang="css">.lastListItemEven { background-color: #eee; border-left: 1px #ccc solid; border-right: 1px #ccc solid; border-bottom: 1px #ccc solid; }</code></pre></div>

<p>By now the developer is firefighting. What’s better? here’s a solution…</p>

<div class="highlight"><pre><code class="language-css" data-lang="css">#main { width: 330px; border: 1px #ccc solid; }
ul { display: none }
li { border-left: 1px #ccc solid; border-right: 1px #ccc solid; }
.first { border-top: 1px #ccc solid; }
.even { background-color: #eee; }
.last { border-bottom: 1px #ccc solid; }</code></pre></div>

<p>With</p>

<div class="highlight"><pre><code class="language-html" data-lang="html">&lt;div id=&quot;main&quot;&gt;
    &lt;h1 onclick=&quot;loadList()&quot;&gt;Top 5 girls name&lt;/h1&gt;
    &lt;ul&gt;
        &lt;li class=&quot;first odd&quot; onclick=&quot;clickName(&#39;Sophia&#39;);&quot;&gt;Sophia&lt;/li&gt;
        &lt;li class=&quot;even&quot; onclick=&quot;clickName(&#39;Emma&#39;);&quot;&gt;Emma&lt;/li&gt;
        &lt;li class=&quot;odd&quot; onclick=&quot;clickName(&#39;Olivia&#39;);&quot;&gt;Olivia&lt;/li&gt;
        &lt;li class=&quot;even&quot; onclick=&quot;clickName(&#39;Ava&#39;);&quot;&gt;Ava&lt;/li&gt;
        &lt;li class=&quot;last odd&quot; onclick=&quot;clickName(&#39;Isabella&#39;);&quot;&gt;Isabella&lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;</code></pre></div>

<p>Some developers seem scared to put multiple class names in one HTML element, but it’s perfectly fine if you ask me - and in fact reads far better.</p>

<p>It’s okay - but it does rely on the developer keeping the HTML up to date. One last sweep…</p>

<div class="highlight"><pre><code class="language-html" data-lang="html">&lt;div id=&quot;main&quot;&gt;
    &lt;h1 onclick=&quot;loadList()&quot;&gt;Top 5 girls name&lt;/h1&gt;
    &lt;ul&gt;
        &lt;li onclick=&quot;clickName(&#39;Sophia&#39;);&quot;&gt;Sophia&lt;/li&gt;
        &lt;li onclick=&quot;clickName(&#39;Emma&#39;);&quot;&gt;Emma&lt;/li&gt;
        &lt;li onclick=&quot;clickName(&#39;Olivia&#39;);&quot;&gt;Olivia&lt;/li&gt;
        &lt;li onclick=&quot;clickName(&#39;Ava&#39;);&quot;&gt;Ava&lt;/li&gt;
        &lt;li onclick=&quot;clickName(&#39;Isabella&#39;);&quot;&gt;Isabella&lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;</code></pre></div>

<p>And</p>

<div class="highlight"><pre><code class="language-css" data-lang="css">#main { width: 330px; border: 1px #ccc solid; }
ul { display: none }
li { border-left: 1px #ccc solid; border-right: 1px #ccc solid; }
li:first-child { border-top: 1px #ccc solid; }
li:last-child { border-bottom: 1px #ccc solid; }
li:nth-child(odd) { background-color: #eee; }</code></pre></div>

<p>Starting to feel good about the CSS. Now for the javascript. Let’s assume we have javascript, but it very simple to write the code in vanilla JS as well.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">function clickName(name) {
  alert(name);
}
function loadList() {
    $(&quot;ul&quot;).show();
}</code></pre></div>

<p>This relies on the html knowing the function names, but it turns into a maintinence nightmare if you ever use the JS in multiple files.</p>

<p>Here’s how we solve it.</p>

<div class="highlight"><pre><code class="language-html" data-lang="html">&lt;div id=&quot;main&quot;&gt;
    &lt;h1&gt;Top 5 girls name&lt;/h1&gt;
    &lt;ul&gt;
        &lt;li&gt;Sophia&lt;/li&gt;
        &lt;li&gt;Emma&lt;/li&gt;
        &lt;li&gt;Olivia&lt;/li&gt;
        &lt;li&gt;Ava&lt;/li&gt;
        &lt;li&gt;Isabella&lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;</code></pre></div>

<p>And</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">$(document).ready(function() {
    $(&quot;h1&quot;).on(&quot;click&quot;, function() {
        loadList();
    });
    $(&quot;li&quot;).on(&quot;click&quot;, function() {
        var text = $(this).text();
        clickName(text);
    });
});
function clickName(name) {
  console.log(name);
}
function loadList() {
    $(&quot;ul&quot;).slideDown();
}</code></pre></div>

<p>Not quite finished yet - let’s honour the closure…</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">$(document).ready(function() {
    function clickName(name) {
      console.log(name);
    }
    function loadList() {
        $(&quot;ul&quot;).slideDown();
    }
    $(&quot;h1&quot;).on(&quot;click&quot;, function() {
        loadList();
    });
    $(&quot;li&quot;).on(&quot;click&quot;, function() {
        var text = $(this).text();
        clickName(text);
    });
});</code></pre></div>

<p>or</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">$(document).ready(function() {
    $(&quot;h1&quot;).on(&quot;click&quot;, function() {
        $(&quot;ul&quot;).slideDown();
    });
    $(&quot;li&quot;).on(&quot;click&quot;, function() {
        console.log(name);
    });
});</code></pre></div>

<p>Now one more cleanup - looks like we have a bit of div-iteous - let’s clean up that div element by changing it to a more semantic one.</p>

<div class="highlight"><pre><code class="language-css" data-lang="css">article { width: 330px; border: 1px #ccc solid; }
ul { display: none }
li { border-left: 1px #ccc solid; border-right: 1px #ccc solid; }
li:first-child { border-top: 1px #ccc solid; }
li:last-child { border-bottom: 1px #ccc solid; }
li:nth-child(odd) { background-color: #eee; }</code></pre></div>

<p>Finally the HTML</p>

<div class="highlight"><pre><code class="language-html" data-lang="html">&lt;article&gt;
    &lt;h1&gt;Top 5 girls name&lt;/h1&gt;
    &lt;ul&gt;
        &lt;li&gt;Sophia&lt;/li&gt;
        &lt;li&gt;Emma&lt;/li&gt;
        &lt;li&gt;Olivia&lt;/li&gt;
        &lt;li&gt;Ava&lt;/li&gt;
        &lt;li&gt;Isabella&lt;/li&gt;
    &lt;/ul&gt;
&lt;/article&gt;</code></pre></div>

<p>Now we have HTML that simply structures some kind of data, CSS that styles the data into a document and javascript that enhances the data with some kind of behaviour. It’s far more simple. Have another look at what it was before…</p>

<div class="highlight"><pre><code class="language-html" data-lang="html">&lt;div id=&quot;main&quot; style=&quot;width: 330px; border: 1px #ccc solid&quot;&gt;
    &lt;h1 onclick=&quot;loadList()&quot;&gt;Top 5 girls name&lt;/h1&gt;
    &lt;ul style=&quot;display: none;&quot;&gt;
        &lt;li onclick=&quot;clickName(&#39;Sophia&#39;);&quot; 
        style=&quot;border-top: 1px #ccc solid; border-left: 1px #ccc solid; border-right: 1px #ccc solid;&quot;&gt;Sophia&lt;/li&gt;
        &lt;li onclick=&quot;clickName(&#39;Emma&#39;);&quot; 
        style=&quot;background-color: #eee; border-left: 1px #ccc solid; border-right: 1px #ccc solid;&quot;&gt;Emma&lt;/li&gt;
        &lt;li onclick=&quot;clickName(&#39;Olivia&#39;);&quot; 
        style=&quot;border-left: 1px #ccc solid; border-right: 1px #ccc solid;&quot;&gt;Olivia&lt;/li&gt;
        &lt;li onclick=&quot;clickName(&#39;Ava&#39;);&quot; 
        style=&quot;background-color: #eee; border-left: 1px #ccc solid; border-right: 1px #ccc solid;&quot;&gt;Ava&lt;/li&gt;
        &lt;li onclick=&quot;clickName(&#39;Isabella&#39;);&quot; 
        style=&quot;border-left: 1px #ccc solid; border-right: 1px #ccc solid; border-bottom: 1px #ccc solid;&quot;&gt;Isabella&lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;</code></pre></div>

<p>I know which I would prefer to upkeep.</p>

</div>


              
              
              <div id="disqus_thread"></div>
              
            <div class="footer">
              <div class="contact">
                <p>
                  Name<br />
                  What You Are<br />
                  digiguru@gmail.com
                </p>
              </div>
              <div class="contact">
                <p>
                  <a href="http://github.com/digiguru/">github.com/digiguru</a><br />
                  <a href="http://twitter.com/thedigiguru/">twitter.com/thedigiguru</a><br />
                </p>
              </div>
            </div>
          </div>
        </div> <!-- /container -->

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-123008-9', 'digiguru.co.uk');
ga('require', 'linkid', 'linkid.js');
ga('send', 'pageview');

</script>
        
<script type="text/javascript">
    var disqus_shortname = 'digigurucouk';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
        
  
    </body>
</html>
