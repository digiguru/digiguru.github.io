<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Managing multiple CSS and javascript files, and reduce your http requests</title>
        <meta name="viewport" content="width=device-width">

        <link href='http://fonts.googleapis.com/css?family=Audiowide' rel='stylesheet' type='text/css'>
        
        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="container">
          <div class="site">
            <div class="header">
              <h1 class="title"><a href="/">Digiguru.co.uk</a></h1>
              <a class="extra" href="/">home</a>
            </div>

                <h2>Managing multiple CSS and javascript files, and reduce your http requests</h2>
<p class="meta">05 Aug 2010</p>

<div class="post">
<div class="css-full-post-content js-full-post-content">
We are always looking at optimizing performance in our website.<br /><br />we have loads of features through the site, but we like to program the work modularly. As a result a single page can have up to 50 different CSS and javascript files. Each of them are very small, but serve a specific function.<br /><br />An example might be as follows...<br /><br /><!-- code formatted by http://manoli.net/csharpformat/ --><br /><pre class="csharpcode"><br /><br /><span class="kwrd">&lt;</span><span class="html">link</span> <span class="attr">href</span><span class="kwrd">="/Css/reset.css"</span> <span class="attr">rel</span><span class="kwrd">="stylesheet"</span> <span class="attr">type</span><span class="kwrd">="text/css"</span> <span class="kwrd">/&gt;</span> <span class="rem">&lt;!-- We want to style nicely --&gt;</span><br /><span class="kwrd">&lt;</span><span class="html">link</span> <span class="attr">href</span><span class="kwrd">="/Css/default.css"</span> <span class="attr">rel</span><span class="kwrd">="stylesheet"</span> <span class="attr">type</span><span class="kwrd">="text/css"</span> <span class="kwrd">/&gt;</span> <span class="rem">&lt;!-- Our sitewide font sizes and colours --&gt;</span><br /><span class="kwrd">&lt;</span><span class="html">link</span> <span class="attr">href</span><span class="kwrd">="/Css/DropdownLists.css"</span> <span class="attr">rel</span><span class="kwrd">="stylesheet"</span> <span class="attr">type</span><span class="kwrd">="text/css"</span> <span class="kwrd">/&gt;</span> <span class="rem">&lt;!-- We have dropdown list navigation done in CSS --&gt;</span><br /><span class="kwrd">&lt;</span><span class="html">link</span> <span class="attr">href</span><span class="kwrd">="/Css/footer.css"</span> <span class="attr">rel</span><span class="kwrd">="stylesheet"</span> <span class="attr">type</span><span class="kwrd">="text/css"</span> <span class="kwrd">/&gt;</span> <span class="rem">&lt;!-- The footer is quite a large chunk that we style nicely --&gt;</span><br /><span class="kwrd">&lt;</span><span class="html">link</span> <span class="attr">href</span><span class="kwrd">="/Css/signinRibbon.css"</span> <span class="attr">rel</span><span class="kwrd">="stylesheet"</span> <span class="attr">type</span><span class="kwrd">="text/css"</span> <span class="kwrd">/&gt;</span> <span class="rem">&lt;!-- This is above the header --&gt;</span><br /><span class="kwrd">&lt;</span><span class="html">link</span> <span class="attr">href</span><span class="kwrd">="/Css/newswide.css"</span> <span class="attr">rel</span><span class="kwrd">="stylesheet"</span> <span class="attr">type</span><span class="kwrd">="text/css"</span> <span class="kwrd">/&gt;</span> <span class="rem">&lt;!-- This is a page that uses our News panel --&gt;</span><br /><span class="kwrd">&lt;</span><span class="html">link</span> <span class="attr">href</span><span class="kwrd">="/Css/buttons.css"</span> <span class="attr">rel</span><span class="kwrd">="stylesheet"</span> <span class="attr">type</span><span class="kwrd">="text/css"</span> <span class="kwrd">/&gt;</span> <span class="rem">&lt;!-- We have buttons on the page, so include our nice button styles --&gt;</span></pre><br /><br />This is 7 stylesheet requests before we even get started on the actual content in the page!<br /><br />Rule number one of ySlow! suggests you <a href="http://developer.yahoo.com/performance/rules.html">minimize the number of HTTP requests</a>. They show that <a href="http://yuiblog.com/blog/2007/01/04/performance-research-part-2/">most users visits to your site are from users with an empty cache</a>.<br /><br />We decided we needed a way to minimize the number of requests per page.<br /><br />I don't have time to waste on creating a massive solution and a quick browse on the internet yeilded nothing exicting that my Boss wanted to pay for, so I quickly wrote this:<br /><br />/CSS/MasterHomepage.aspx<br /><!-- code formatted by http://manoli.net/csharpformat/ --><br /><pre class="csharpcode"><br /><span class="asp">&lt;%@ Page language="VB" ContentType="text/css" %&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/Css/reset.css" --&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/css/default.css" --&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/Css/buttons.css" --&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/Css/DropdownLists.css" --&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/css/footer.css" --&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/css/signinRibbon.css" --&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/Css/newswide.css" --&gt;</span></pre><br /><br />All I have to do is include a single file in the page, and I get all the stylesheets.<br /><pre class="csharpcode"><br /><span class="kwrd">&lt;</span><span class="html">link</span> <span class="attr">href</span><span class="kwrd">="/Css/MasterHomepage.aspx"</span> <span class="attr">rel</span><span class="kwrd">="stylesheet"</span> <span class="attr">type</span><span class="kwrd">="text/css"</span> <span class="kwrd">/&gt;</span><br /></pre><br />Suddenly i've reduced the 5 files to 1.<br /><br />I can use the same technique for javascript<br /><br /><!-- code formatted by http://manoli.net/csharpformat/ --><br /><pre class="csharpcode"><br /><span class="kwrd">&lt;</span><span class="html">script</span> <span class="attr">type</span><span class="kwrd">="text/javascript"</span> <span class="attr">src</span><span class="kwrd">="/js/googlecse.js"</span><span class="kwrd">&gt;&lt;/</span><span class="html">script</span><span class="kwrd">&gt;</span> <br />&lt;script type=<span class="str">"text/javascript"</span> src=<span class="str">"/js/pngfix.js"</span>&gt;&lt;/script&gt; <br />&lt;script type=<span class="str">"text/javascript"</span> src=<span class="str">"/js/jquery.js"</span>&gt;&lt;/script&gt; <br />&lt;script type=<span class="str">"text/javascript"</span> src=<span class="str">"/js/DropdownList.js"</span>&gt;&lt;/script&gt;<br />&lt;script type=<span class="str">"text/javascript"</span> src=<span class="str">"/js/daterangepicker.js"</span>&gt;<span class="kwrd">&lt;/</span><span class="html">script</span><span class="kwrd">&gt;</span></pre><br /><br />becomes<br /><br /><!-- code formatted by http://manoli.net/csharpformat/ --><br /><pre class="csharpcode"><br /><span class="asp">&lt;%@ Page language="VB" ContentType="text/javascript" %&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/js/googlecse.js" --&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/js/pngfix.js" --&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/js/jquery.js" --&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/js/DropdownList.js" --&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/js/daterangepicker.js" --&gt;</span></pre><br /><br />That's it for now, but check back later to see how we sped up these pages further.
</div>
</div>


            <div class="footer">
              <div class="contact">
                <p>
                  Name<br />
                  What You Are<br />
                  digiguru@gmail.com
                </p>
              </div>
              <div class="contact">
                <p>
                  <a href="http://github.com/digiguru/">github.com/digiguru</a><br />
                  <a href="http://twitter.com/thedigiguru/">twitter.com/thedigiguru</a><br />
                </p>
              </div>
            </div>
          </div>
        </div> <!-- /container -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-123008-9', 'digiguru.co.uk');
  ga('send', 'pageview');

</script>
    </body>
</html>
