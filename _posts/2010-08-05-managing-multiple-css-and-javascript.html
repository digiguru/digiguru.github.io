---
title: "Managing multiple CSS and javascript files, and reduce your http requests"
layout: "post"
permalink: "/2010/08/managing-multiple-css-and-javascript.html"
uuid: "8289237232717194094"
guid: "tag:blogger.com,1999:blog-7065313.post-8289237232717194094"
date: "2010-08-05 10:21:00"
updated: "2010-08-05 15:23:29"
description: 
blogger:
    siteid: "7065313"
    postid: "8289237232717194094"
    comments: "0"
categories: [javascript, yslow, optimization, css]
author: 
    name: "The digiguru"
    url: "http://www.blogger.com/profile/10779825056014182666?rel=author"
    image: "http://img2.blogblog.com/img/b16-rounded.gif"
---

<div class="css-full-post-content js-full-post-content">
We are always looking at optimizing performance in our website.<br /><br />we have loads of features through the site, but we like to program the work modularly. As a result a single page can have up to 50 different CSS and javascript files. Each of them are very small, but serve a specific function.<br /><br />An example might be as follows...<br /><br /><!-- code formatted by http://manoli.net/csharpformat/ --><br /><pre class="csharpcode"><br /><br /><span class="kwrd">&lt;</span><span class="html">link</span> <span class="attr">href</span><span class="kwrd">="/Css/reset.css"</span> <span class="attr">rel</span><span class="kwrd">="stylesheet"</span> <span class="attr">type</span><span class="kwrd">="text/css"</span> <span class="kwrd">/&gt;</span> <span class="rem">&lt;!-- We want to style nicely --&gt;</span><br /><span class="kwrd">&lt;</span><span class="html">link</span> <span class="attr">href</span><span class="kwrd">="/Css/default.css"</span> <span class="attr">rel</span><span class="kwrd">="stylesheet"</span> <span class="attr">type</span><span class="kwrd">="text/css"</span> <span class="kwrd">/&gt;</span> <span class="rem">&lt;!-- Our sitewide font sizes and colours --&gt;</span><br /><span class="kwrd">&lt;</span><span class="html">link</span> <span class="attr">href</span><span class="kwrd">="/Css/DropdownLists.css"</span> <span class="attr">rel</span><span class="kwrd">="stylesheet"</span> <span class="attr">type</span><span class="kwrd">="text/css"</span> <span class="kwrd">/&gt;</span> <span class="rem">&lt;!-- We have dropdown list navigation done in CSS --&gt;</span><br /><span class="kwrd">&lt;</span><span class="html">link</span> <span class="attr">href</span><span class="kwrd">="/Css/footer.css"</span> <span class="attr">rel</span><span class="kwrd">="stylesheet"</span> <span class="attr">type</span><span class="kwrd">="text/css"</span> <span class="kwrd">/&gt;</span> <span class="rem">&lt;!-- The footer is quite a large chunk that we style nicely --&gt;</span><br /><span class="kwrd">&lt;</span><span class="html">link</span> <span class="attr">href</span><span class="kwrd">="/Css/signinRibbon.css"</span> <span class="attr">rel</span><span class="kwrd">="stylesheet"</span> <span class="attr">type</span><span class="kwrd">="text/css"</span> <span class="kwrd">/&gt;</span> <span class="rem">&lt;!-- This is above the header --&gt;</span><br /><span class="kwrd">&lt;</span><span class="html">link</span> <span class="attr">href</span><span class="kwrd">="/Css/newswide.css"</span> <span class="attr">rel</span><span class="kwrd">="stylesheet"</span> <span class="attr">type</span><span class="kwrd">="text/css"</span> <span class="kwrd">/&gt;</span> <span class="rem">&lt;!-- This is a page that uses our News panel --&gt;</span><br /><span class="kwrd">&lt;</span><span class="html">link</span> <span class="attr">href</span><span class="kwrd">="/Css/buttons.css"</span> <span class="attr">rel</span><span class="kwrd">="stylesheet"</span> <span class="attr">type</span><span class="kwrd">="text/css"</span> <span class="kwrd">/&gt;</span> <span class="rem">&lt;!-- We have buttons on the page, so include our nice button styles --&gt;</span></pre><br /><br />This is 7 stylesheet requests before we even get started on the actual content in the page!<br /><br />Rule number one of ySlow! suggests you <a href="http://developer.yahoo.com/performance/rules.html">minimize the number of HTTP requests</a>. They show that <a href="http://yuiblog.com/blog/2007/01/04/performance-research-part-2/">most users visits to your site are from users with an empty cache</a>.<br /><br />We decided we needed a way to minimize the number of requests per page.<br /><br />I don't have time to waste on creating a massive solution and a quick browse on the internet yeilded nothing exicting that my Boss wanted to pay for, so I quickly wrote this:<br /><br />/CSS/MasterHomepage.aspx<br /><!-- code formatted by http://manoli.net/csharpformat/ --><br /><pre class="csharpcode"><br /><span class="asp">&lt;%@ Page language="VB" ContentType="text/css" %&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/Css/reset.css" --&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/css/default.css" --&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/Css/buttons.css" --&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/Css/DropdownLists.css" --&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/css/footer.css" --&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/css/signinRibbon.css" --&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/Css/newswide.css" --&gt;</span></pre><br /><br />All I have to do is include a single file in the page, and I get all the stylesheets.<br /><pre class="csharpcode"><br /><span class="kwrd">&lt;</span><span class="html">link</span> <span class="attr">href</span><span class="kwrd">="/Css/MasterHomepage.aspx"</span> <span class="attr">rel</span><span class="kwrd">="stylesheet"</span> <span class="attr">type</span><span class="kwrd">="text/css"</span> <span class="kwrd">/&gt;</span><br /></pre><br />Suddenly i've reduced the 5 files to 1.<br /><br />I can use the same technique for javascript<br /><br /><!-- code formatted by http://manoli.net/csharpformat/ --><br /><pre class="csharpcode"><br /><span class="kwrd">&lt;</span><span class="html">script</span> <span class="attr">type</span><span class="kwrd">="text/javascript"</span> <span class="attr">src</span><span class="kwrd">="/js/googlecse.js"</span><span class="kwrd">&gt;&lt;/</span><span class="html">script</span><span class="kwrd">&gt;</span> <br />&lt;script type=<span class="str">"text/javascript"</span> src=<span class="str">"/js/pngfix.js"</span>&gt;&lt;/script&gt; <br />&lt;script type=<span class="str">"text/javascript"</span> src=<span class="str">"/js/jquery.js"</span>&gt;&lt;/script&gt; <br />&lt;script type=<span class="str">"text/javascript"</span> src=<span class="str">"/js/DropdownList.js"</span>&gt;&lt;/script&gt;<br />&lt;script type=<span class="str">"text/javascript"</span> src=<span class="str">"/js/daterangepicker.js"</span>&gt;<span class="kwrd">&lt;/</span><span class="html">script</span><span class="kwrd">&gt;</span></pre><br /><br />becomes<br /><br /><!-- code formatted by http://manoli.net/csharpformat/ --><br /><pre class="csharpcode"><br /><span class="asp">&lt;%@ Page language="VB" ContentType="text/javascript" %&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/js/googlecse.js" --&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/js/pngfix.js" --&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/js/jquery.js" --&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/js/DropdownList.js" --&gt;</span><br /><span class="rem">&lt;!-- #Include virtual="~/js/daterangepicker.js" --&gt;</span></pre><br /><br />That's it for now, but check back later to see how we sped up these pages further.
</div>